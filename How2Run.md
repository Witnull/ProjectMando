# MANDO-HGT REBUILD

[![python](https://img.shields.io/badge/python-3.10.12-blue)](https://www.python.org/)
[![Static Badge](https://img.shields.io/badge/Ubuntu-22.04-orange)](https://releases.ubuntu.com/jammy/)
[![Static Badge](https://img.shields.io/badge/Docker-latest-teal)](https://docker.com/)
[![Static Badge](https://img.shields.io/badge/CUDA-12.1-green)]

Service: `mando-hgt-rebuild`

## Dir tree

```
.
|
+---- assets
|
+---- data
|
+--- experiments (VERY IMPORTANT) | DO NOT overwrite the 2 python scripts | the other folder can be copy from Old MANDO
|        |
|        |
|        +---- ge-sc-data (DATASET), OVERWRITE THIS from OLd MANDO |
|        |
|        +---- models (Auto Generated)
|        +---- logs (Auto Generated)
|        |
|        +---- node_classification.py (VERY IMPORTANT) | DO NOT OVERWRITE THIS
|        |
|        +---- graph_classification.py (VERY IMPORTANT) | DO NOT OVERWRITE THIS
|
|
+---- forensics
|
+---- Mando (Contains the Mando, may not need to put it in, this is for ease of access to the old script to test it)
|
|
+--- ge-sc-data (Contains the required dependencies from the Dataset repo below)
|
+---- models
|
+---- process_graphs
|
+---- sco_models
|
+---- utils
|

```

## Required dependencies

### Repositories:

#### Old MANDO:

`https://github.com/MANDO-Project/ge-sc.git`
\
\*\* copy the experiments folder's data.

#### Dataset:

`https://github.com/minhnn-tiny/ge-sc-dataset.git`
\
\*\* Dataset

---

## Build docker

To using docker

`docker compose up` ( --build : to rebuild the docker with latest changes)

`docker exec -ti <container name/id> /bin/bash`

Or

`docker build -t <image name/id> .`

`docker run -itv .:/app/mando-hgt <image name/id>`

More information refer to the Docker documentation:
`https://docs.docker.com/compose/`

---

## Running

#### Note: X - May not need to run / ignore

### Processing data to graphs phase

1. `python process_graphs/call_graph_generator.py`
2. `python process_graphs/control_flow_graph_generator.py`
3. `python process_graphs/combination_call_graph_and_control_flow_graph_helper.py`
4. `python process_graphs/byte_code_control_flow_graph_generator.py`
   - This is for the baseline models

---

### Training the baselines models phase

#### Graph Classification

Training Phase

```bash
python -m experiments.graph_classification --epochs 50 --repeat 20
```

To show the result table

```bash
python -m experiments.graph_classification --result
```

---

#### Node Classification

Training Phase

```bash
python -m experiments.node_classification --epochs 50 --repeat 20
```

To show the result table

```bash
python -m experiments.node_classification --result
```

---

# ------ IGNORE BELOW ------

# Methods

| Category                          | Methods                          | CMD |
| --------------------------------- | -------------------------------- | --- |
| Original Heterogeneous GNN        | metapath2vec                     |     |
| Original Homogeneous GNNs         | LINE <br> node2vec               |     |
| The best Buggy F1 scores of MANDO | Node features of the best scores |     |

---

### Test baselines models phase

---

### Training HGT models phase

| Category                                  | Methods                  | CMD |
| ----------------------------------------- | ------------------------ | --- |
| MANDO-HGT with Node Features Generated by | NodeType One Hot Vectors |     |
|                                           | metapath2vec             |     |
|                                           | LINE                     |     |
|                                           | node2vec                 |     |

---

### Test HGT models phase

---

### Visualize phase

6. process_graphs/dgl_graph_generator.py X
7. process_graphs/solidifi_reader.py X

8. node_classifier.py
9. node_classifier.py
10. visualize.py

11. sco_models/dataloader.py
12. sco_models/graph_utils.py
13. sco_models/model_hgt.py
14. sco_models/opcodes.py
15. sco_models/utils.py
16. sco_models/visualization.py

Flag: `y0uf0undtheFl4g_m4nd0h67`
